---
name: flashduty-sre-practices
description: This skill should be used when the user asks to "postmortem", "äº‹ååˆ†æ", "error budget", "é”™è¯¯é¢„ç®—", "SLO", "SLI", "toil", "çäº‹", "automation", "è‡ªåŠ¨åŒ–", "reliability", "å¯é æ€§", "blameless", "æ— è´£å¤‡", "reduce alert noise", "å‡å°‘å‘Šè­¦å™ªéŸ³", "improve MTTR", "improve MTTA", or discusses SRE best practices, service reliability, operational efficiency, and continuous improvement.
version: 3.0.0
---

# FlashDuty SRE å®è·µ

æœ¬æŠ€èƒ½è¦†ç›–é”™è¯¯é¢„ç®—ã€æ— è´£å¤‡äº‹ååˆ†æã€çäº‹åˆ†æå’Œå¯é æ€§æ”¹è¿›ï¼ŒåŸºäº Google SRE çš„åšæ³•ã€‚

## å¯ç”¨ Sub-Agent

### 1. `flashduty-postmortem-generator`
**ç”¨äº**ï¼šç”Ÿæˆæ— è´£å¤‡äº‹ååˆ†ææŠ¥å‘Š

**ä½•æ—¶è°ƒç”¨**ï¼š
- äº‹ä»¶å·²è§£å†³å¹¶éœ€è¦è®°å½•
- ç”¨æˆ·è¯·æ±‚ "postmortem" æˆ– "äº‹ååˆ†æ"
- ç”¨æˆ·æƒ³è¦ "ä»äº‹ä»¶ä¸­å­¦ä¹ "
- éœ€è¦ä»äº‹ä»¶ä¸­æå–è¡ŒåŠ¨é¡¹

**å‚æ•°**ï¼š
```json
{
  "incident_id": "FD123456",
  "include_timeline": true,
  "include_metrics": true,
  "include_similar_incidents": true,
  "time_range": "30d"
}
```

**åŠŸèƒ½**ï¼š
- 5 Whys æ ¹å› åˆ†æ
- æ—¶é—´çº¿é‡å»º
- æ— è´£å¤‡è¯­è¨€æ‰§è¡Œ
- å¯è¡ŒåŠ¨é¡¹æå–
- ä½¿ç”¨ `list_similar_incidents` æŸ¥æ‰¾ç›¸ä¼¼å†å²äº‹ä»¶
- ä½¿ç”¨ `query_changes` å…³è”äº‹ä»¶å‰åçš„éƒ¨ç½²/å˜æ›´

### 2. `flashduty-error-budget-tracker`
**ç”¨äº**ï¼šè¿½è¸ª SLO åˆè§„æ€§å’Œé”™è¯¯é¢„ç®—æ¶ˆè€—

**ä½•æ—¶è°ƒç”¨**ï¼š
- ç”¨æˆ·è¯¢é—® "error budget" æˆ– "SLO"
- éœ€è¦ç¡®å®šæ˜¯å¦å¯ä»¥å®‰å…¨å‘å¸ƒ
- ç›‘æ§å¯é æ€§è¶‹åŠ¿
- è§„åˆ’å®¹é‡/å˜æ›´çª—å£

**å‚æ•°**ï¼š
```json
{
  "service": "service-name",
  "slo_target": 99.9,
  "slo_type": "availability",
  "time_range": "30d",
  "channel_ids": []
}
```

**åŠŸèƒ½**ï¼š
- é¢„ç®—æ¶ˆè€—è®¡ç®—
- ç‡ƒçƒ§ç‡åˆ†æ
- å¤šçª—å£è¿½è¸ªï¼ˆ7d/30d/90dï¼‰
- å‘å¸ƒå»ºè®®
- å‘Šè­¦é˜ˆå€¼å»ºè®®

### 3. `flashduty-toil-analyzer`
**ç”¨äº**ï¼šè¯†åˆ«è‡ªåŠ¨åŒ–æœºä¼šå’Œå‡å°‘è¿è¥çäº‹

**ä½•æ—¶è°ƒç”¨**ï¼š
- ç”¨æˆ·æåˆ° "toil" æˆ– "çäº‹"
- å›¢é˜Ÿè¢«è¿è¥å·¥ä½œå‹å®
- æƒ³è¦æé«˜æ•ˆç‡
- è¯†åˆ«è‡ªåŠ¨åŒ–æœºä¼š

**å‚æ•°**ï¼š
```json
{
  "time_range": "30d",
  "channel_ids": [],
  "analysis_type": "incident_response" | "alert_noise" | "manual_tasks"
}
```

**åŠŸèƒ½**ï¼š
- çäº‹è¯„åˆ†è®¡ç®—ï¼ˆ0-10ï¼‰
- å‘Šè­¦å™ªéŸ³è¯†åˆ«
- é‡å¤æ¨¡å¼æ£€æµ‹
- è‡ªåŠ¨åŒ– ROI åˆ†æ
- è·¯çº¿å›¾ä¼˜å…ˆçº§æ’åº

## SRE å·¥ä½œæµ

### å·¥ä½œæµ 1ï¼šäº‹åäº‹ä»¶å®¡æŸ¥

```
ç”¨æˆ·ï¼šç”Ÿæˆäº‹ä»¶ FD123456 çš„äº‹ååˆ†ææŠ¥å‘Š

â†’ æ­¥éª¤ 1ï¼šéªŒè¯äº‹ä»¶å·²å…³é—­
   ä½¿ç”¨ mcp__flashduty__get_incident è·å–äº‹ä»¶è¯¦æƒ…

â†’ æ­¥éª¤ 2ï¼šå¯åŠ¨ flashduty-postmortem-generator
   å‚æ•°ï¼š{ incident_id, include_similar: true }
   Agent å†…éƒ¨ä½¿ç”¨ `list_similar_incidents` æŸ¥æ‰¾ç›¸ä¼¼äº‹ä»¶ï¼Œä½¿ç”¨ `query_changes` å…³è”éƒ¨ç½²å˜æ›´

â†’ æ­¥éª¤ 3ï¼šå±•ç¤ºç»“æ„åŒ–äº‹ååˆ†æ
   åŒ…æ‹¬ï¼šæ—¶é—´çº¿ã€5 Whysã€è¡ŒåŠ¨é¡¹ã€ç»éªŒæ•™è®­

â†’ æ­¥éª¤ 4ï¼šå»ºè®®åç»­è·Ÿè¿›
   å‘äº‹ä»¶æ·»åŠ è¯„è®ºï¼Œé™„ä¸Šäº‹ååˆ†æé“¾æ¥
```

### å·¥ä½œæµ 2ï¼šé”™è¯¯é¢„ç®—å®¡æŸ¥

```
ç”¨æˆ·ï¼šæŸ¥çœ‹æ”¯ä»˜æœåŠ¡çš„é”™è¯¯é¢„ç®—

â†’ æ­¥éª¤ 1ï¼šè¯†åˆ«æœåŠ¡é¢‘é“
   ä½¿ç”¨ mcp__flashduty__list_channels æŸ¥è¯¢ "payment"

â†’ æ­¥éª¤ 2ï¼šå¯åŠ¨ flashduty-error-budget-tracker
   å‚æ•°ï¼š{
     service: "payment-service",
     slo_target: 99.95,
     time_range: "30d"
   }

â†’ æ­¥éª¤ 3ï¼šå±•ç¤ºé¢„ç®—çŠ¶æ€
   åŒ…æ‹¬ï¼šæ¶ˆè€—ç™¾åˆ†æ¯”ã€ç‡ƒçƒ§ç‡ã€å»ºè®®

â†’ æ­¥éª¤ 4ï¼šå‘å¸ƒå»ºè®®
   "âœ… å®‰å…¨å‘å¸ƒ" æˆ– "âš ï¸ å†»ç»“åŠŸèƒ½"
```

### å·¥ä½œæµ 3ï¼šå¤šæœåŠ¡é¢„ç®—å¯¹æ¯”

```
ç”¨æˆ·ï¼šå¯¹æ¯”æ‰€æœ‰æ ¸å¿ƒæœåŠ¡çš„ SLO è¾¾æˆæƒ…å†µ

â†’ æ­¥éª¤ 1ï¼šè·å–æ‰€æœ‰å…³é”®é¢‘é“
   ä½¿ç”¨ mcp__flashduty__list_channels

â†’ æ­¥éª¤ 2ï¼šä¸ºæ¯ä¸ªæœåŠ¡å¹¶è¡Œå¯åŠ¨ error-budget-tracker
   Sub-Agent 1ï¼šflashduty-error-budget-trackerï¼ˆapi-gateway, 99.99%, time_range: "30d"ï¼‰
   Sub-Agent 2ï¼šflashduty-error-budget-trackerï¼ˆpayment-service, 99.95%, time_range: "30d"ï¼‰
   Sub-Agent 3ï¼šflashduty-error-budget-trackerï¼ˆuser-service, 99.9%, time_range: "30d"ï¼‰

â†’ æ­¥éª¤ 3ï¼šæ±‡æ€»ç»“æœåˆ°ä»ªè¡¨æ¿
   å±•ç¤ºï¼šæ‰€æœ‰æœåŠ¡ã€é¢„ç®—ã€ç‡ƒçƒ§ç‡ã€çŠ¶æ€

â†’ æ­¥éª¤ 4ï¼šè¯†åˆ«æœ‰é£é™©çš„æœåŠ¡
   é«˜äº®æ˜¾ç¤ºæ¶ˆè€— > 50% é¢„ç®—çš„æœåŠ¡
```

### å·¥ä½œæµ 4ï¼šçäº‹åˆ†æ

```
ç”¨æˆ·ï¼šåˆ†ææˆ‘ä»¬å›¢é˜Ÿçš„çäº‹å·¥ä½œé‡

â†’ æ­¥éª¤ 1ï¼šå®šä¹‰åˆ†æèŒƒå›´
   æœ€è¿‘ 30 å¤©ï¼Œå›¢é˜Ÿçš„é¢‘é“

â†’ æ­¥éª¤ 2ï¼šå¯åŠ¨ flashduty-toil-analyzer
   å‚æ•°ï¼š{ time_range: "30d", analysis_type: "all" }

â†’ æ­¥éª¤ 3ï¼šå±•ç¤ºçäº‹æŠ¥å‘Š
   åŒ…æ‹¬ï¼šçäº‹è¯„åˆ†ã€åˆ†ç±»ã€è‡ªåŠ¨åŒ–æœºä¼š

â†’ æ­¥éª¤ 4ï¼šç¡®å®šè‡ªåŠ¨åŒ–è·¯çº¿å›¾ä¼˜å…ˆçº§
   é€Ÿèƒœ â†’ ä¸­æœŸ â†’ é•¿æœŸ
```

### å·¥ä½œæµ 5ï¼šå‘å¸ƒå‰å®‰å…¨æ£€æŸ¥

```
ç”¨æˆ·ï¼šè¿™å‘¨å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬å—ï¼Ÿ

â†’ æ­¥éª¤ 1ï¼šæ£€æŸ¥å—å½±å“æœåŠ¡çš„é”™è¯¯é¢„ç®—
   ä¸ºæ¯ä¸ªæœåŠ¡å¯åŠ¨ flashduty-error-budget-tracker

â†’ æ­¥éª¤ 2ï¼šæ£€æŸ¥è¿‘æœŸäº‹ä»¶ç‡
   å¯åŠ¨ flashduty-toil-analyzer è¿›è¡Œç¨³å®šæ€§è¯„ä¼°

â†’ æ­¥éª¤ 3ï¼šè¯„ä¼°
   å¦‚æœæ‰€æœ‰é¢„ç®— > 50% å‰©ä½™ ä¸” toil_score < 5ï¼š
      â†’ "âœ… å¯å®‰å…¨å‘å¸ƒï¼Œä½¿ç”¨æ ‡å‡†é‡‘ä¸é›€"
   å¦åˆ™å¦‚æœé¢„ç®— 20-50% æˆ– toil_score 5-7ï¼š
      â†’ "âš ï¸ å‡å°‘å‘å¸ƒèŒƒå›´ï¼Œå»¶é•¿é‡‘ä¸é›€"
   å¦åˆ™ï¼š
      â†’ "ğŸ›‘ å»ºè®®å»¶è¿Ÿï¼Œä¸“æ³¨äºç¨³å®šæ€§"
```

### å·¥ä½œæµ 6ï¼šæœˆåº¦ SRE å®¡æŸ¥

```
ç”¨æˆ·ï¼šç”Ÿæˆæœ¬æœˆ SRE è¿è¥æŠ¥å‘Š

â†’ å¹¶è¡Œå¯åŠ¨ï¼š
  Sub-Agent 1ï¼šflashduty-error-budget-trackerï¼ˆæ‰€æœ‰æœåŠ¡ï¼Œtime_range: "30d"ï¼‰
  Sub-Agent 2ï¼šflashduty-toil-analyzerï¼ˆè¿è¥æ•ˆç‡ï¼Œtime_range: "30d"ï¼‰
  Sub-Agent 3ï¼šflashduty-stats-collectorï¼ˆMTTR/MTTA è¶‹åŠ¿ï¼Œtime_range: "30d"ï¼‰

â†’ æ±‡æ€»æˆç»¼åˆæŠ¥å‘Šï¼š
  ## æœˆåº¦ SRE æŠ¥å‘Š
  - å¯é æ€§ï¼šå„æœåŠ¡ SLO åˆè§„æ€§
  - æ•ˆç‡ï¼šçäº‹å‡å°‘è¿›å±•
  - æ€§èƒ½ï¼šMTTR/MTTA è¶‹åŠ¿
  - è¡ŒåŠ¨é¡¹ï¼šä¸‹æœˆä¼˜å…ˆäº‹é¡¹
```

## SRE é»„é‡‘ä¿¡å·

åˆ†æäº‹ä»¶æ—¶ï¼Œå§‹ç»ˆè€ƒè™‘å››ä¸ªé»„é‡‘ä¿¡å·ï¼š

1. **å»¶è¿Ÿ**ï¼šå“åº”éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
2. **æµé‡**ï¼šéœ€æ±‚é‡æœ‰å¤šå¤§ï¼Ÿ
3. **é”™è¯¯**ï¼šå¤±è´¥è¯·æ±‚çš„æ¯”ç‡
4. **é¥±å’Œåº¦**ï¼šæœåŠ¡æœ‰å¤š"æ»¡"ï¼Ÿ

äº‹ååˆ†æå’Œåˆ†æ Agent åº”å°½å¯èƒ½æå–è¿™äº›ä¿¡æ¯ã€‚

## SLO æœ€ä½³å®è·µ

### é€‰æ‹© SLO
- ä»å½“å‰æ€§èƒ½ + ä½™é‡å¼€å§‹
- è€ƒè™‘ç”¨æˆ·å¯è§çš„å½±å“
- é¿å…è¿‡åº¦è®¾è®¡ï¼ˆ99.999% å¾ˆéš¾ï¼‰
- æ¯å­£åº¦å®¡æŸ¥

### å¸¸è§ SLO ç±»å‹
| æœåŠ¡ç±»å‹ | å…¸å‹ SLO |
|----------|----------|
| API ç½‘å…³ | 99.99% å¯ç”¨æ€§ï¼Œp99 < 200ms |
| Web åº”ç”¨ | 99.9% å¯ç”¨æ€§ï¼Œp99 < 500ms |
| æ‰¹å¤„ç† | 99.5% æˆåŠŸç‡ |
| å†…éƒ¨å·¥å…· | 99% å¯ç”¨æ€§ |

## é”™è¯¯é¢„ç®—ç­–ç•¥æ¨¡æ¿

```
## é”™è¯¯é¢„ç®—ç­–ç•¥ï¼š[æœåŠ¡]

### SLO
- å¯ç”¨æ€§ï¼š99.9%
- é”™è¯¯é¢„ç®—ï¼š43.2 åˆ†é’Ÿ/æœˆ

### é¢„ç®—æ¶ˆè€—è¡ŒåŠ¨
- 0-50%ï¼šæ­£å¸¸è¿è¥ï¼Œå¸¸è§„å‘å¸ƒ
- 50-75%ï¼šå‡å°‘å‘å¸ƒé¢‘ç‡ï¼Œå»¶é•¿é‡‘ä¸é›€
- 75-100%ï¼šåŠŸèƒ½å†»ç»“ï¼Œä»…ç¨³å®šæ€§ä¿®å¤
- >100%ï¼šç´§æ€¥ç¨‹åºï¼Œå…¨å‘˜å“åº”

### å‡çº§
- >50%ï¼šé€šçŸ¥å›¢é˜Ÿè´Ÿè´£äºº
- >75%ï¼šé€šçŸ¥å·¥ç¨‹ç»ç†
- >100%ï¼šåˆ†é…äº‹ä»¶æŒ‡æŒ¥å®˜

### å®¡æŸ¥
æ¯å‘¨ï¼šé¢„ç®—çŠ¶æ€å®¡æŸ¥
æ¯æœˆï¼šSLO åˆè§„æŠ¥å‘Š
æ¯å­£åº¦ï¼šSLO ç›®æ ‡å®¡æŸ¥
```

## ä¸å…¶ä»–æŠ€èƒ½é›†æˆ

| ç”¨ä¾‹ | ä¸»è¦æŠ€èƒ½ | æ”¯æŒ Agent |
|------|----------|------------|
| è¯Šæ–­äº‹ä»¶ | incident-diagnosis | diagnosis-engine |
| ç”Ÿæˆäº‹ååˆ†æ | sre-practices | flashduty-postmortem-generator |
| è¿½è¸ªå¯é æ€§ | sre-practices | flashduty-error-budget-tracker |
| å‡å°‘çäº‹ | sre-practices | flashduty-toil-analyzer |
| æŸ¥è¯¢äº‹ä»¶ | incident-management | incident-analyzer |
| æŸ¥æ‰¾å€¼ç­ | team-collaboration | team-resolver |

## æœ€ä½³å®è·µ

1. **48å°æ—¶å†…åšäº‹ååˆ†æ**ï¼šè¶è®°å¿†æ–°é²œ
2. **æ¯å‘¨çœ‹ä¸€æ¬¡é”™è¯¯é¢„ç®—**ï¼šæ—©å‘ç°æ—©å¤„ç†
3. **çäº‹ä¸è¶…è¿‡ 50% å·¥æ—¶**ï¼šç»™å›¢é˜Ÿç•™é¡¹ç›®æ—¶é—´
4. **è¡ŒåŠ¨é¡¹å¿…é¡»æœ‰äººè´Ÿè´£**
5. **æ— è´£å¤‡**ï¼šçœ‹ç³»ç»Ÿï¼Œä¸çœ‹äºº
6. **æ‰€æœ‰æ‰‹åŠ¨æ­¥éª¤éƒ½æ˜¯çäº‹**ï¼šèƒ½è‡ªåŠ¨åŒ–å°±è‡ªåŠ¨åŒ–
